require('nez').realize 'Client', (Client, test, context, Uplink) -> 

    context 'create()', (it) ->

        it 'throws on missing opts', (done) ->

            try
                Client.create()
            catch error 
                error.should.match /missing opts/
                test done

        it 'hands the socket to Uplink.handle', (done) ->

            Uplink.handle = (name, socket) -> 
                socket.should.equal 'SOCKET'
                name.should.equal 'NAME'
                test done

            Client.create 
                container: {}
                socket: 'SOCKET'
                name: 'NAME'
