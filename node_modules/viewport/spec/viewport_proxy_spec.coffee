require('nez').realize 'ViewportProxy', (ViewportProxy, test, it) -> 

    it 'subscribes to viewport:create and viewport:reconnect and disconnect messages', (done) ->

        events = []

        vp = new ViewportProxy on: (e, cb) ->

            cb on: (event) ->

                events.push event
        
        events[0].should.equal 'disconnect'
        events[1].should.equal 'viewport:connect'
        test done
