// Generated by CoffeeScript 1.4.0
var Node, opts, plex;

Node = require('./node');

opts = require('./opts');

plex = {
  start: function(opts) {
    var node;
    if (opts == null) {
      opts = {};
    }
    if (typeof opts.config !== 'undefined') {
      node = opts;
      opts = node.config();
    } else {
      node = new Node;
    }
    plex.opts.validate(opts);
    if (opts.listen) {
      if (opts.connect) {
        opts.mode = 'proxy';
      } else {
        opts.mode = 'root';
      }
    }
    if (opts.connect && !opts.mode) {
      opts.mode = 'leaf';
    }
    return node.start(opts);
  },
  supportedAdaptors: 'socket.io',
  Node: Node,
  opts: opts
};

module.exports = plex;
