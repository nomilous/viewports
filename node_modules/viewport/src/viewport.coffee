if typeof define isnt 'function' then define = require('amdefine')(module)


define ['./uplink', './view', './controls'], (uplink, view, controls) -> 

    connect: (config) -> 

        throw 'missing config' unless config

        container = config.container || throw 'missing container'
        socket    = config.socket    || throw 'viewport missing socket'
        name      = config.name      || throw 'viewport missing name'

        uplink.init 

            name: name
            type: 'socket.io'
            socket: socket

        controls.init 

            uplink: uplink
            container: container
        

