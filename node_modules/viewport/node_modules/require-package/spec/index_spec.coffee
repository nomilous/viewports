require('nez').realize 'Index', (Index, test, context, Development) -> 

    context 'mount()', (it) ->

        it 'requires conf.app as connect based app instance', (done) ->

            try
                Index.mount()
            catch error
                error.should.match /requires conf.app as express app instance/
                test done

        it 'requires a conf.name as package name', (done) -> 

            try
                Index.mount app: get: ->
            catch error
                error.should.match /requires conf.name as package name/
                test done

        it 'requires conf.src as path to package scripts', (done) -> 

            try
                Index.mount
                    app: get: ->
                    name: 'PACKAGENAME'
            catch error
                error.should.match /requires conf.src as path to package scripts/
                test done

        it 'defaults to development environment', (done) -> 

            Development.prototype.route = -> test done

            Index.mount
                src: __dirname + '../lib'
                name: 'PACKAGENAME'
                scripts: [
                    'directory/module.js'
                    'main.js'
                ]
                app: get: (path, cb) -> 
