module.exports = class RequirePackage

    #
    # mount a connect based application
    #

    @mount: (conf = {}) -> 

        unless conf.app and (

            typeof conf.app.use == 'function' or 
            typeof conf.app.get == 'function'

        )

            throw 'requires conf.app as connect / express based app instance'

        unless conf.name

            throw 'requires conf.name as package name'

        unless conf.src

            throw 'requires conf.src as path to package scripts'

        # console.log 'mount()', 
        #     package: conf.name
        #     src: conf.src

        unless conf.scripts

            throw 'requires conf.scripts as list of paths relative to conf.src'

        if typeof conf.app.get == 'function'

            for script in conf.scripts

                console.log 'serving script:', "/#{conf.name}/#{script}"

                conf.app.get "/#{conf.name}/#{script}", (req, res) -> 

                    res.header 'Content-Type':'text/javascript'
                    res.send "console.log('okgood')"



