require('nez').realize 'Viewport', (Viewport, test, context, Uplink) -> 

    context 'init()', (it) ->

        it 'throws on missing opts', (done) ->

            try
                Viewport.init()
            catch error 
                error.should.match /missing config/
                test done

        it 'hands the socket to Uplink.handle', (done) ->

            Uplink.init = (config) -> 
                config.socket.should.equal 'SOCKET'
                config.group.should.equal 'GROUP'
                test done

            Viewport.init 
                container: {}
                socket: 'SOCKET'
                group: 'GROUP'
