require('nez').realize 'Uplink', (Uplink, test, context) -> 

    context 'on connect', (it) ->

        it 'sends viewport:connect on connect', (done) ->

            Uplink.init 'NAME',
                on: (e, cb) -> cb()
                emit: (event) -> 
                    event.should.equal 'viewport:connect'
                    test done


        it 'sends name of viewport on connect', (done) -> 

            Uplink.init 'NAME', 
                on: (e, cb) -> cb()
                emit: (event, data) ->

                    data.should.eql 
                        name: 'NAME'

                    test done
