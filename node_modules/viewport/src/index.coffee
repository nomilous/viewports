fs            = require 'fs'
ViewportProxy = require './viewport_proxy'
rjsm          = require 'requirejs-middleware'
path          = require 'path'

module.exports = 

    protocol: (new ViewportProxy).protocol

    client: (dest, app) -> 

        app.use rjsm 

            src: __dirname
            dest: dest
            build: true
            debug: true
            modules: 
                '/main.js': 
                    include: 'main'
                    baseUrl: __dirname
                    optimize: 'none'

