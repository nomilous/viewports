require('nez').realize 'Index', (Index, test, context) -> 

    context 'mount()', (it) ->

        it 'requires conf.app as connect based app instance', (done) ->

            try
                Index.mount()
            catch error
                error.should.match /requires conf.app as connect \/ express based app instance/
                test done

        it 'requires a conf.name as package name', (done) -> 

            try
                Index.mount app: use: ->
            catch error
                error.should.match /requires conf.name as package name/
                test done

        it 'requires conf.src as path to package scripts', (done) -> 

            try
                Index.mount
                    app: use: ->
                    name: 'PACKAGENAME'
            catch error
                error.should.match /requires conf.src as path to package scripts/
                test done

        it 'assigns routes for all scripts in src if app defines get()', (done) -> 

            paths = []

            Index.mount
                src: __dirname + '../lib'
                name: 'PACKAGENAME'
                app: get: ( path, cb ) -> 
                    paths.push path

            paths[0].should.equal '/PACKAGENAME/directory/script.js'
            test done

