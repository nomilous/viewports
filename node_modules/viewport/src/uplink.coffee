if typeof define isnt 'function'
    define = require('amdefine')(module)

define -> 

    service = 

        connected: false

        handle: (name, socket) ->

            socket.on 'connect', ->

                unless service.connected

                    service.connected       = true
                    service.name            = name
                    service.originalSession = socket.socket.sessionid

                    return socket.emit 'viewport:connect' 

                        sessionid: service.originalSession
                        name: service.name

                return socket.emit 'viewport:reconnect'

                    sessionid: service.originalSession
                    newsessionid: socket.socket.sessionid
                    name: service.name

            socket.on 'viewport:config', (data) -> 

                console.log 'viewport:config', data

                



