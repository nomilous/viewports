if typeof define isnt 'function' then define = require('amdefine')(module)


define ['./uplink', './view', './controls'], (uplink, view, controls) -> 

    init: (config) -> 

        throw 'missing config' unless config

        container = config.container || throw 'missing container'
        socket    = config.socket    || throw 'viewport missing socket'
        group     = config.group     || throw 'viewport missing group'

        #
        # return hash for external api
        # 

        uplink: uplink.init 

            group: group
            type: 'socket.io'
            socket: socket

        controls: controls.init 

            uplink: uplink
            container: container

        view: view.init

            uplink: uplink
            container: container
        

