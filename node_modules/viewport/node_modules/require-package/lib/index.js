// Generated by CoffeeScript 1.4.0
var Development, Production, RequirePackage;

Production = require('./production');

Development = require('./development');

module.exports = RequirePackage = (function() {

  function RequirePackage() {}

  RequirePackage.prototype.mount = function(conf) {
    var cache, env;
    if (conf == null) {
      conf = {};
    }
    if (!(conf.app && typeof conf.app.get === 'function')) {
      throw 'requires conf.app as express app instance';
    }
    if (!conf.name) {
      throw 'requires conf.name as package name';
    }
    if (!conf.src) {
      throw 'requires conf.src as path to package scripts';
    }
    if (!conf.scripts) {
      throw 'requires conf.scripts as list of paths relative to conf.src';
    }
    env = process.env.NODE_ENV || process.env.ENV || 'development';
    if (env === 'production') {
      cache = new Production;
      return cache.route(conf);
    } else {
      cache = new Development;
      return cache.route(conf);
    }
  };

  return RequirePackage;

})();
