module.exports = 

    init: (config) -> 

        config.sockets.on 'connection', (socket) -> 



            #
            # shapes socket protocol
            #



        config.app.use (req, res, next) -> 

            #
            # TODO: this following, but less lazy
            #

            return next() unless match = req.url.match /^\/shape\/(.*).js$/

            require('fs').readFile __dirname + "/#{ match[1] }.js", (err, data) -> 

                if err

                    console.log 'no script for', req.url
                    return next()

                res.set 'Content-Type', 'text/javascript'
                res.send data
