require('nez').realize 'Viewport', (Viewport, test, context, Uplink) -> 

    context 'connect()', (it) ->

        it 'throws on missing opts', (done) ->

            try
                Viewport.connect()
            catch error 
                error.should.match /missing config/
                test done

        it 'hands the socket to Uplink.handle', (done) ->

            Uplink.init = (config) -> 
                config.socket.should.equal 'SOCKET'
                config.group.should.equal 'GROUP'
                test done

            Viewport.connect 
                container: {}
                socket: 'SOCKET'
                group: 'GROUP'
